<!DOCTYPE html>
<html>

<body>

    <p>Click "Start". The page will start a beeping noise. Click "Stop" to stop the metronome.</p>

    <button onclick="startMetronome(120);">Start</button>
    <button onclick="stopMetronome();">Stop</button>
    <script>
        var Started = false;
        var audio = new Audio('audio_stuff/beep-07.wav');
        var audio2 = new Audio('audio_stuff/Whoosh.WAV');
        var counter = 0;
        var measure = 1;
        var timerhandle;
        function OurBeeps() {
            if (counter === 0) {
                audio2.play();
            } else {
                audio.play();
            }
            counter = counter + 1
            console.log("Beep", new Date(), "Measure:", measure, "Beat:", counter);
            if (counter === 4) {
                counter = 0
                measure = measure + 1
            }
        }
        function stopMetronome() {
            clearInterval(timerhandle);
            Started = false
            counter = 0;
        }
        function startMetronome(BPM) {
            if (Started === false) {
                Started = true;
                var t = 60 / BPM * 1000
                timerhandle = setInterval(OurBeeps, t);
            }
        }
    </script>

</body>

</html>